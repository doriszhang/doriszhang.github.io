<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Next Digital - Campaign Demo</title>
	<!-- Behavioral Meta Data -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no">

	<!-- Styles -->
	<link rel="stylesheet" type="text/css" href="styles/styles.css"/>
	<link rel="stylesheet" type="text/css" href="styles/animate.css"/>
	<script src="deploy/jquery-1.10.2.min.js"></script>
</head>
<body>
	<div id="guideTilt" style="display: block; position: absolute; z-index:1200; margin:10px; width:100%; height:100%; background-color:#666; color:#fff;">
		<div><img src="images/tilt.png" style="height:100px; margin-left:100px;"/></div>
		<h4>Tilting is fun!</h4>
		<p>If you phone doesn't support orientation detection in browser, please try touch right and left side.</p>
	</div>
	<h4 id="animTitle" class="ad_anim" style="display: block; position: absolute; z-index:1000; margin:5px;"></h4>
    <p id="animContent" class="ad_anim" style="display: block; position: absolute; z-index:1000; top: 30px; margin:5px;"></p>
    <div id="city-bg-1" style="background: url('images/city.jpg') 0px -100px; background-repeat:x; height:100%; width: 100%; position: absolute; float: left; top:0px; z-index:0;"></div>


    	<!--
    	<div id="city-bg-2" style="background-image: url('images/city.jpg'); background-repeat: repeat-x; height:600px; width: 800px; position: absolute; float: left; left: 799px;"></div>
    	<div id="city-bg-3" style="background-image: url('images/city.jpg'); background-repeat: repeat-x; height:600px; width: 800px; position: absolute; float: left; left: 1598px;"></div>
    	<div id="city-bg-4" style="background-image: url('images/city.jpg'); background-repeat: repeat-x; height:600px; width: 800px; position: absolute; float: left; left: 2397px;"></div>
        -->
        

	<div id="container" class="container">
		<ul id="scene" class="scene" style="top:230px; left:0px;">
			<li class="layer"  data-depth="0.40" >
				<img style="position: absolute; width: 80%; height:60%; top: 50px;" src="images/bus.png">
			</li>
			<li class="layer"  data-depth="0.30">
				<img style="position: absolute; left:50px; top: 130px;" src="images/tile.png">
			</li>
			<li class="layer"  data-depth="0.30">
				<img style="position: absolute; left:185px; top: 130px;" src="images/tile.png"></li>
			<li class="layer"  data-depth="3.00">
				<img style="position: absolute; left:235px; top: -120px;" src="images/sun.png"></li>
			<li class="layer"  data-depth="2.00">
				<img style="position: absolute; left:25px; top: -60px;" src="images/bird1.png"></li>
			<li class="layer"  data-depth="4.00">
				<img style="position: absolute; left:95px; top: -80px;" src="images/bird2.png"></li>
		</ul>
	</div>

    <script>
        var bgX = 300;
    	var speed = 1000;
    	var animFlag = 0;
		var nd_ControlSpeed = function(xOffset, yOffset){
		//console.log('xOffset', xOffset);
		    if(xOffset < 0){
				speed = speed + 1;
				animFlag = 1;
			}
			else{
				speed = speed - 1;
			}
			if(speed > 1500){
				speed=1500;
			}
			else if(speed<1000){
				speed = 1000;
            if(animFlag==1){
            	animFlag = 0;
animParapraph(paragraphIndex, paragraphs.length, paragraphs[paragraphIndex].title, paragraphs[paragraphIndex].content);
         paragraphIndex = paragraphIndex+1;
         if(paragraphIndex>paragraphs.length-1){
            paragraphIndex = 0;
         }
     }

			}
			//console.log('speed', speed);
		};
    </script>

	<!-- Scripts -->

	<script src="deploy/parallax.js"></script>
	<script>
	  var moveCity = function(){
  		
  		/*
  		var bg1 = $('#city-bg-1');
  		var bg2 = $('#city-bg-2');
  		var bg3 = $('#city-bg-3');
  		var bg4 = $('#city-bg-4');

  		bg1.offset({ top: bg1.offset().top, left: bg1.offset().left - 1});
  		bg2.offset({ top: bg2.offset().top, left: bg2.offset().left - 1});
  		bg3.offset({ top: bg3.offset().top, left: bg3.offset().left - 1});
  		bg4.offset({ top: bg4.offset().top, left: bg4.offset().left - 1});
        */

        bgX = bgX - 1 * (speed - 1000)/10;
        $('#city-bg-1').css('background', 'url(images/city.jpg) '+ bgX.toString() + 'px -100px');

		setTimeout(function(){
            moveCity();
          }, speed/10);
  };


  var paragraphIndex = 0;
var paragraphs = [
        {title: '战略方案' , content: '将业务发展战略向数字化的战略方案转型是获得成功的关键。我们以客户为导向，创造客户专属的数字战略方案，连接，吸引并留住目标受众。'}
        ,{title: '创意设计' , content: '成功的数字项目源于以客户为中心的创意设计。我们完美融合用户体验、艺术美学以及交互功能，以战略方案为引导，以设计流程为方法，最终完成创意设计，为您带来预期的营销成果。'}
        ,{title: '前瞻科技' , content: '顶尖的科技和专家帮助您利用网络力量实现业务增长的需要。我们令人骄傲的强大科技背景和实力使我们将前瞻科技与行业洞察力相结合，来实现您的成功。'}
        ,{title: '市场营销' , content: '数字营销的无限可能在于您如何接触，转化并留住您的客户。而我们，正是以业绩为导向的营销大师。'}
        ,{title: '官方微信', content: '关注我们的官方微信nextdigital_sh来获取更多消息。'}];
         
         
  function testAnim(x) {
     
		animParapraph(paragraphIndex, paragraphs.length, paragraphs[paragraphIndex].title, paragraphs[paragraphIndex].content);
         paragraphIndex = paragraphIndex+1;
         if(paragraphIndex>paragraphs.length-1){
            paragraphIndex = 0;
         }
  };

  function animParapraph(curIndex, total, title, content){
      var titleLen = title.length;
      var contentLen = content.length;
      var titleHtml = title;
      /*
      for(var i=0;i<titleLen;i++){
          titleHtml = titleHtml + '<span class="t1" style="display: block; float: left;">'+title.substring(i,i+1)+'</span>';
      }
      */
      $('#animTitle').html(titleHtml);
      var contentHtml = content;
      /*
      for(var i=0;i<contentLen;i++){
          contentHtml = contentHtml + '<span class="c1" style="display: block; float: left;">'+content.substring(i,i+1)+'</span>';
      }
      */
      $('#animContent').html(contentHtml);

      setEff(curIndex, total, $('.ad_anim'));
  };

  function setEff(curIndex, total, $container){
      $container.each(function(){
        if(curIndex>=total-1){
          $(this).removeClass().addClass('ad_anim animated bounceInUp');
        }
        else{
          $(this).removeClass().addClass('ad_anim animated bounceInUp').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
          		var $this = $(this);
          		var runOut = setTimeout(function(){
            		$this.removeClass().addClass('ad_anim animated bounceOutDown');
          		}, 5000);
          });   
        }
      })      
  };

  function randInEff(){
      var i=Math.floor((Math.random() * 4) + 1);
      switch(i){
          case 1:
            return 'bounceInDown';
            case 2:
            return 'bounceInLeft';
            case 3:
            return 'bounceInRight';
            case 4:
            return 'bounceInUp';
            default:
            return 'bounceIn'
      }
  };

  function randOutEff(){
      var i=Math.floor((Math.random() * 4) + 1);
      switch(i){
          case 1:
            return 'bounceOutDown';
            case 2:
            return 'bounceOutLeft';
            case 3:
            return 'bounceOutRight';
            case 4:
            return 'bounceOutUp';
            default:
            return 'bounceOut'
      }
  };

  	try
	{
		$(document).ready(function() {

            setTimeout(function(){

            	$('#guideTilt').remove();

            	var scene = document.getElementById('scene');
				var parallax = new Parallax(scene);
				setTimeout(function(){
            		moveCity();
          		}, speed);
				var anim = $(this).val();
    			testAnim(anim);
            }, 3000);
    	});
	}
	catch(ex){
		window.alert(ex.message);
	}
	</script>

</body>
</html>

