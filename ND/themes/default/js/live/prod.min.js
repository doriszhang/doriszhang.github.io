/*!
 * Project Name: (Type Name Here)
 * File Build Date: Fri Apr 11 2014 13:59:09 GMT+0800 (CST)
 */
/* logging.js */
(function(c){(function(a){function d(){}for(var e="assert,clear,count,debug,dir,dirxml,error,exception,firebug,group,groupCollapsed,groupEnd,info,log,memoryProfile,memoryProfileEnd,profile,profileEnd,table,time,timeEnd,timeStamp,trace,warn".split(","),b;b=e.pop();)a[b]=a[b]||d})(function(){try{console.log();return window.console}catch(a){return window.console={}}}());c.fn.log=function(a){console.log("%s: %o",a,this);return this}})(jQuery);
/* jquery.overscroll.js */
(function(q,G,H,r,z,I,J,j,s){var g=function(){var a=j.browser,b=H.userAgent,c=G.createElement("overscroll").style,e=(a=a.webkit?"webkit":a.mozilla?"moz":a.msie?"ms":a.opera?"o":"")?["-","-"].join(a):"";g={prefix:a,overflowScrolling:false};j.each(a?[a,""]:[a],function(d,f){var i=f?f+"RequestAnimationFrame":"requestAnimationFrame";d=f?f+"OverflowScrolling":"overflowScrolling";if(q[i]!==s)g.animate=function(l){q[i].call(q,l)};if(c[d]!==s)if(b.indexOf("Chrome")<0)g.overflowScrolling=e+"overflow-scrolling"});
g.touchEvents="ontouchstart"in q;if(!g.animate)g.animate=function(d){z(d,1E3/60)};if(a==="moz"||a==="webkit"){g.cursorGrab=e+"grab";g.cursorGrabbing=e+"grabbing"}else{g.cursorGrab="url(https://mail.google.com/mail/images/2/openhand.cur), default";g.cursorGrabbing="url(https://mail.google.com/mail/images/2/closedhand.cur), default"}return g}(),k={drag:"mousemove touchmove",end:"mouseup mouseleave click touchend touchcancel",hover:"mouseenter mouseleave",ignored:"select dragstart drag",scroll:"scroll",
start:"mousedown touchstart",wheel:"mousewheel DOMMouseScroll"},h={captureThreshold:3,driftDecay:1.1,driftSequences:22,driftTimeout:100,scrollDelta:15,thumbOpacity:0.7,thumbThickness:6,thumbTimeout:400,wheelDelta:20},K={cancelOn:"",direction:"multi",dragHold:false,hoverThumbs:false,scrollDelta:h.scrollDelta,showThumbs:true,persistThumbs:false,wheelDelta:h.wheelDelta,wheelDirection:"vertical",zIndex:999},n=function(a,b){b.trigger("overscroll:"+a)},A=function(){return(new Date).getTime()},t=function(a,
b,c){b.x=a.pageX;b.y=a.pageY;b.time=A();b.index=c;return b},o=function(a,b,c,e){var d,f;if(a&&a.added){if(a.horizontal){d=c*(1+b.container.width/b.container.scrollWidth);f=e+b.thumbs.horizontal.top;a.horizontal.css("margin",f+"px 0 0 "+d+"px")}if(a.vertical){d=c+b.thumbs.vertical.left;f=e*(1+b.container.height/b.container.scrollHeight);a.vertical.css("margin",f+"px 0 0 "+d+"px")}}},p=function(a,b,c){if(a&&a.added&&!b.persistThumbs)if(c){a.vertical&&a.vertical.stop(true,true).fadeTo("fast",h.thumbOpacity);
a.horizontal&&a.horizontal.stop(true,true).fadeTo("fast",h.thumbOpacity)}else{a.vertical&&a.vertical.fadeTo("fast",0);a.horizontal&&a.horizontal.fadeTo("fast",0)}},L=function(a){var b=a.data("events"),c=b&&b.click?b.click.slice():[];b&&delete b.click;a.one("mouseup touchend touchcancel",function(){j.each(c,function(e,d){a.click(d)});return false})},M=function(a){var b=a.data;p(b.thumbs,b.options,a.type==="mouseenter")},N=function(a){a=a.data;a.flags.dragged||o(a.thumbs,a.sizing,this.scrollLeft,this.scrollTop)},
B=function(a){a.preventDefault();var b=a.data,c=b.options,e=b.sizing,d=b.thumbs,f=b.wheel,i=b.flags,l;a=a.originalEvent;i.drifting=false;if(a.wheelDelta)l=a.wheelDelta/(g.prefix==="o"?-120:120);if(a.detail)l=-a.detail/3;l*=c.wheelDelta;if(!f){b.target.data("overscroll").dragging=i.dragging=true;b.wheel=f={timeout:null};p(d,c,true)}if(c.wheelDirection==="horizontal")this.scrollLeft-=l;else this.scrollTop-=l;f.timeout&&I(f.timeout);o(d,e,this.scrollLeft,this.scrollTop);f.timeout=z(function(){b.target.data("overscroll").dragging=
i.dragging=false;p(d,c,b.wheel=null)},h.thumbTimeout)},u=function(a){a.preventDefault();var b=a.data,c=a.originalEvent.touches,e=b.options,d=b.sizing,f=b.thumbs,i=b.position,l=b.flags,m=b.target.get(0);if(g.touchEvents&&c&&c.length)a=c[0];l.dragged||p(f,e,true);l.dragged=true;if(e.direction!=="vertical")m.scrollLeft-=a.pageX-i.x;if(b.options.direction!=="horizontal")m.scrollTop-=a.pageY-i.y;t(a,b.position);if(--b.capture.index<=0){b.target.data("overscroll").dragging=l.dragging=true;t(a,b.capture,
h.captureThreshold)}o(f,d,m.scrollLeft,m.scrollTop);n("dragging",b.target)},R=function(a,b,c){var e=b.data,d,f,i,l=e.capture,m=e.options,O=e.sizing,P=e.thumbs;d=A()-l.time;var w=a.scrollLeft,x=a.scrollTop,C=h.driftDecay;if(d>h.driftTimeout)return c(e);d=m.scrollDelta*(b.pageX-l.x);b=m.scrollDelta*(b.pageY-l.y);if(m.direction!=="vertical")w-=d;if(m.direction!=="horizontal")x-=b;f=d/h.driftSequences;i=b/h.driftSequences;n("driftstart",e.target);e.drifting=true;g.animate(function Q(){if(e.drifting){e.drifting=
false;if(i>1&&a.scrollTop>x||i<-1&&a.scrollTop<x){e.drifting=true;a.scrollTop-=i;i/=C}if(f>1&&a.scrollLeft>w||f<-1&&a.scrollLeft<w){e.drifting=true;a.scrollLeft-=f;f/=C}o(P,O,a.scrollLeft,a.scrollTop);g.animate(Q);n("drifting",e.target)}else{n("driftend",e.target);c(e)}})},D=function(a){var b=a.data,c=b.target,e=b.start=j(a.target),d=b.flags;d.drifting=false;if(e.size()&&!e.is(b.options.cancelOn)){g.touchEvents||a.preventDefault();c.css("cursor",g.cursorGrabbing);c.data("overscroll").dragging=d.dragging=
d.dragged=false;b.options.dragHold?j(document).on(k.drag,b,u):c.on(k.drag,b,u);b.position=t(a,{});b.capture=t(a,{},h.captureThreshold);n("dragstart",c)}},v=function(a){var b=a.data,c=b.target,e=b.options,d=b.flags,f=b.thumbs,i=function(){f&&!e.hoverThumbs&&p(f,e,false)};e.dragHold?j(document).unbind(k.drag,u):c.unbind(k.drag,u);if(b.position){n("dragend",c);d.dragging?R(c.get(0),a,i):i()}d.dragging&&b.start.is(a.target)&&L(b.start);c.data("overscroll").dragging=b.start=b.capture=b.position=d.dragged=
d.dragging=false;c.css("cursor",g.cursorGrab)},S=function(a){a=j.extend({},K,a);if(a.direction!=="multi"&&a.direction!==a.wheelDirection)a.wheelDirection=a.direction;a.scrollDelta=r.abs(a.scrollDelta);a.wheelDelta=r.abs(a.wheelDelta);a.scrollLeft=a.scrollLeft===s?null:r.abs(a.scrollLeft);a.scrollTop=a.scrollTop===s?null:r.abs(a.scrollTop);return a},T=function(a){var b=j(a),c=b.width();b=b.height();var e=c>=a.scrollWidth?c:a.scrollWidth;a=b>=a.scrollHeight?b:a.scrollHeight;return{valid:e>c||a>b,container:{width:c,
height:b,scrollWidth:e,scrollHeight:a},thumbs:{horizontal:{width:c*c/e,height:h.thumbThickness,corner:h.thumbThickness/2,left:0,top:b-h.thumbThickness},vertical:{width:h.thumbThickness,height:b*b/a,corner:h.thumbThickness/2,left:c-h.thumbThickness,top:0}}}},y=function(a,b){var c=j(a),e,d=c.data("overscroll")||{},f=c.attr("style");a=b?function(){d=c.data("overscroll");e=d.thumbs;f?c.attr("style",f):c.removeAttr("style");if(e){e.horizontal&&e.horizontal.remove();e.vertical&&e.vertical.remove()}c.removeData("overscroll").off(k.wheel,
B).off(k.start,D).off(k.end,v).off(k.ignored,false)}:j.noop;return j.isFunction(d.remover)?d.remover:a},E=function(a,b){return{position:"absolute",opacity:b.persistThumbs?h.thumbOpacity:0,"background-color":"black",width:a.width+"px",height:a.height+"px","border-radius":a.corner+"px",margin:a.top+"px 0 0 "+a.left+"px","z-index":b.zIndex}},U=function(a,b,c){var e={},d=false;if(b.container.scrollWidth>0&&c.direction!=="vertical"){d=E(b.thumbs.horizontal,c);e.horizontal=j("<div/>").css(d).prependTo(a)}if(b.container.scrollHeight>
0&&c.direction!=="horizontal"){d=E(b.thumbs.vertical,c);e.vertical=j("<div/>").css(d).prependTo(a)}e.added=!!d;return e},V=function(a,b){b=S(b);var c=T(a),e,d={options:b,sizing:c,flags:{dragging:false},remover:y(a,true)};if(c.valid){d.target=a=j(a).css({position:"relative",overflow:"hidden",cursor:g.cursorGrab}).on(k.wheel,d,B).on(k.start,d,D).on(k.end,d,v).on(k.scroll,d,N).on(k.ignored,false);b.dragHold?j(document).on(k.end,d,v):d.target.on(k.end,d,v);b.scrollLeft!==null&&a.scrollLeft(b.scrollLeft);
b.scrollTop!==null&&a.scrollTop(b.scrollTop);if(b.showThumbs){d.thumbs=e=U(a,c,b);if(e.added){o(e,c,a.scrollLeft(),a.scrollTop());b.hoverThumbs&&a.on(k.hover,d,M)}}a.data("overscroll",d)}},W=function(a){y(a)()},F=function(a){return this.removeOverscroll().each(function(){V(this,a)})},X=function(){return this.removeOverscroll().each(function(){j(this).data("overscroll",{remover:y(this)}).css(g.overflowScrolling,"touch").css("overflow","auto")})};F.settings=h;j.extend(J,{overscroll:g.overflowScrolling?
X:F,removeOverscroll:function(){return this.each(function(){W(this)})}})})(window,document,navigator,Math,setTimeout,clearTimeout,jQuery.fn,jQuery);
/* ND.vignettePlayer.js */
var ND=function(U,f){U.vignettePlayer=function(){var m;return{init:function(g,I){function V(){t=J.width();k=J.height();q.width(t).height(k);var a=k+c.imgCount*10;A=a-k;m.height(a);a=Math.max(k/c.videoImgHeight,t/c.videoImgWidth);B=a*c.videoImgHeight;o=a*c.videoImgWidth;ga.width(o).height(B).css("left",(t-o)/2+"px").css("top",(k-B)/2+"px");n.width=o;n.height=B;W.fillRect(0,0,n.width,n.height);a=k<c.windowMinHeight?c.skipMinHeight:k/(K+X)*K-Y;var b=k-a-Y,d=Math.min(Math.floor(b/c.shortcutMinHeight),
c.videoCount-1);b=b/d;d=ha*b;w.css({height:a,width:ia*a});r.find("A").animate({width:d,height:b});r.parent().width(d);C.height(k);C.width(Math.ceil(L/ja*k));D=t-d;statementTextHeight=k/(k<c.windowMinHeight?1:c.statementHeightRatio);statementTextWidth=ka*statementTextHeight;statementOffsetHorizental=(D-statementTextWidth)/2;statementOffsetVertical=(k-statementTextHeight)/2;x.css({width:statementTextWidth,height:statementTextHeight,left:statementOffsetHorizental,top:statementOffsetVertical});s.css({width:statementTextWidth,
height:statementTextHeight,right:statementOffsetHorizental,top:statementOffsetVertical})}function la(){V();q.scrollTop(y*A);M(p)}function Z(){y=q.scrollTop()/A;ma.hide();$()}function $(){var a=Math.floor(E()*5E3);if(Math.floor(p*5E3)!=Math.floor(y*5E3)){p+=(y-p)/20;M(p);requestAnimFrame($)}else Math.floor(p*5E3)<a-10&&N(i-1);aa.hide();i==c.videoCount-1&&Math.floor(p*5E3)>=4990&&aa.show()}function M(a){var b=na(a);u&&b<10&&ba(i+1);if(u){b=b+(o-t)/2;F.length==0&&O(i+1,F);P(a+E(i+1)-1,b,o-b,i+1);P(a,
0,b)}else P(a)}function na(a){var b=i==0||i==c.videoCount-1?4:5,d=Math.max(Math.floor(a*b),0),e=b=a*b-d;a=1-b;i==0&&d++;switch(d){case 1:x.show();s.hide();break;case 2:s.show();x.show();break;case 3:x.hide();s.show();if(u)u=false;break;case 4:if(s.is(":visible"))u=true;s.hide();break}if(d%2==0){e=a;a=b}d=e*(D-L);a=a*(D-L);ca.width(d);da.width(a);return d}function P(a,b,d,e){var h=!e?i:e,H=!e?G:F;b=!b?0:b;d=!d?n.width:d;oa(Math.round(a*(c.imgCount-1)),h);a=l[h].nearest;if(a<0)l[h].nearest=a=0;if(l[h].current!=
a){O(h,H);var Q=j/2;if(H[Q].complete){e&&console.log(a+","+H[Q].src);W.drawImage(H[Q],Math.floor(b/o*c.videoImgWidth),0,Math.floor(d/o*c.videoImgWidth),c.videoImgHeight,Math.floor(b),0,Math.floor(d),Math.floor(n.height));l[h].current=a}}}function N(a){if(a>=0&&a<c.videoCount){f(n).stop(true,true);f(n).animate({opacity:0},function(){ba(a);M(E());f(this).animate({opacity:1})})}}function oa(a,b){b=!b?i:b;var d=0,e;a=Math.floor(a);for(d=0;d<j/2;d++){e=a+d;if(e>=0&&e<c.imgCount&&G[j/2+d])l[b].nearest=
e;e=a-d;if(e>=0&&e<c.imgCount&&G[j/2-d])l[b].nearest=e}}function z(a,b){var d=i;if(b)d=b;a=(a+1+Math.pow(10,3)).toString(10).substr(1);return v(c.vignettePath,d).replace("{index}",a)}function v(a,b){myVideo=i;if(b)myVideo=b;return c.path.replace("{currentVideo}",myVideo+1)+a}function E(a){var b=i,d=0.2;if(a)b=a;if(b==c.videoCount-1)d=0.25;if(b==0)d=0;return d}function ba(a){i=a;var b=E();pa=true;u=false;l[i].current=-1;p=b-2.0E-4;y=b;q.scrollTop(A*b);F=[];x.attr("src",l[a].openStatement.src);s.attr("src",
l[a].closeStatement.src);R.src=Modernizr.audio.ogg?v(c.oggPath):Modernizr.audio.mp3?v(c.mp3Path):null;f(R).find("EMBED").attr("src",v(c.mp3Path));R.play()}function O(a,b){a=!a?i:a;var d=l[a].nearest;b=!b?G:b;var e;if(b.length==0){S.removeClass("comlete");ea.width(0);for(var h=T=0;h<j+1;h++){b.push(new Image);if(b<j/2+1)b[h].src=z(h,a)}fa()}else{b[j/2]=new Image;b[j/2].src=z(d,a);for(e=1;e<j/2;e++){h=d-e;if(!(h<0)){b[j/2-e]=new Image;if(h<0)b[j/2-e].src=z(h,a)}h=d+e;b[j/2-e]=new Image;if(h>c.imgCount-
1)b[j/2+e].src=z(h,a)}}}function fa(){if(T==j/2+1){S.addClass("complete");m.css("visibility","visible")}else{ea.width(++T/(j/2+1)*100+"%");setTimeout(fa,100)}}m=f(g||"#vignetteWrapper");if(!m||!m.size())return this;var c=f.extend({imgCount:175,videoCount:9,currentVideo:0,videoImgWidth:1440,videoImgHeight:758,windowMinHeight:484,shortcutMinHeight:50,skipMinHeight:56,speed:4,statementHeightRatio:2.24,statementTextWidth:650,statementTextHeight:500,videoContainer:".vignette",videos:".vignette > img",
statements:".statements",bracket:".bracket",openStatement:".open-statement",closeStatement:".close-statement",shortcut:".shortcut",mailto:".mail",loading:"#loading",loadingBar:".loading-bar DIV",path:"media/vignettes/{currentVideo}/",openStatementPath:"open-statement.png",closeStatementPath:"close-statement.png",vignettePath:"preview{index}.jpg",mp3Path:"sound-track.mp3",oggPath:"sound-track.ogg"},I),k,t,A,o,B,D,ka=c.statementTextWidth/c.statementTextHeight,p=-2.0E-4,y=0,i=c.currentVideo,pa=true,
u=false,J=f(window),q=f("#page"),ga=f(c.videoContainer),ma=f(c.videos,m),R=f("AUDIO",m)[0];g=f(c.statements,m);var ca=f(c.openStatement,g),x=f("IMG",ca),da=f(c.closeStatement,g),s=f("IMG",da),aa=f(c.mailto,m),C=f(c.bracket,g),ja=C.height(),L=C.width(),S=f(c.loading),ea=S.find(c.loadingBar),r=f(c.shortcut,m),w=r.prev();g=r.width();var X=r.height(),ha=g/X*(c.videoCount-1);g=w.height();I=w.width();var K=w.outerHeight(true),Y=K-g,ia=I/g,n=document.getElementById("myCanvas"),W=n.getContext("2d");window.requestAnimFrame=
function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();var l=[];for(g=0;g<c.videoCount;g++){l.push({openStatement:new Image,closeStatement:new Image,firstSequence:new Image,current:0,nearest:0});l[g].openStatement.src=v(c.openStatementPath,g);l[g].closeStatement.src=v(c.closeStatementPath,g);l[g].firstSequence.src=z(0,g)}var G=[],
F=[],j=20,T=0;J.resize(la);q.scroll(Z);w.on("click",function(a){N(c.videoCount-1);a.preventDefault()}).find("IMG").on("mouseenter",function(){this.src=this.src.replace("logo.png","logo-glow.png")}).on("mouseleave",function(){this.src=this.src.replace("logo-glow.png","logo.png")});r.on("mouseenter","A",function(){f("IMG",f(this)).fadeIn()}).on("mouseleave","A",function(){f("IMG",f(this)).fadeOut()}).on("click","A",function(a){var b=r.find("A").index(f(this));N(b);a.preventDefault()});q.scrollTop(0);
V();O();q.overscroll({persistThumbs:true,showThumbs:false,wheelDelta:c.speed*20,scrollDelta:c.speed*5,direction:"vertical"}).on("overscroll:drifting overscroll:dragging oversroll:dragstart overscroll:dragend overscroll:driftstart overscroll:driftend",function(a){console.log(a.type);if(a.type=="overscroll:drifting"||a.type=="overscroll:dragging")Z()});return this}}};return U}(window.ND||{},jQuery);
/* ND.browserCheck.js */
var ND=function(c,d){c.browserCheck=function(){var b;return{init:function(a){b=d(a||"#unsupport-message");if(!b||!b.size())return this;a=d.browser;var e=a.version;if(a.msie&&parseInt(e)<8||a.mozilla&&parseInt(e)<3.6)window.location.href="unsupported.html";return this}}};return c}(window.ND||{},jQuery);
/* ND.fillScreen.js */
var ND=function(e,b){e.fillScreen=function(){var a;return{init:function(h){function i(){var c=b(window).width(),d=b(window).height(),f=a.width(),g=a.height();Math.max(c/f,d/g);a.css({position:"absolute",width:c,height:d,top:(c-f)/2,left:(d-g)/2})}a=b(h||".fill-screen");if(!a||!a.size())return this;b(window).resize(i);return this}}};return e}(window.ND||{},jQuery);
/* ND.expandFromCenter.js */
var ND=function(b,c){b.expandFromCenter=function(){var a;return{init:function(d){a=c(d||".mail .icon");if(!a||!a.size())return this;a.on("mouseenter",function(){a[0].src="media/static-logo.png";a.siblings().animate({width:176})}).parent().on("mouseleave",function(){a[0].src="media/rolling-logo.gif";a.siblings().animate({width:0})});return this}}};return b}(window.ND||{},jQuery);
/* global.js */
(function(a,b){b(function(){a.vignettePlayer().init();a.browserCheck().init();a.expandFromCenter().init();a.fillScreen().init()})})(window.ND||{},jQuery);
